<?xml version="1.0"?>
<tool id="bracken_build_database" name="Bracken Database Builder" tool_type="manage_data" version="2.2">
    <description>bracken database builder</description>
    <requirements>
        <requirement type="package" version="2.2">bracken</requirement>
        <requirement type="package" version="2.0.8_beta">kraken2</requirement>
        <requirement type="package" version="1.7.0">bagit</requirement>
    </requirements>
    <version_command>bracken --version</version_command>
    <command detect_errors="exit_code">
    <![CDATA[
        python '$__tool_directory__/bracken_build_database.py'
          '${out_file}'
          --kraken-db ${kraken_db}
          --threads \${GALAXY_SLOTS:-1}
          --kmer-len ${kmer_len}
          --read-len ${read_len}
          --database-name '${database_name}'
    ]]>
    </command>
    <inputs>
        <param name="kraken_db" type="select">
            <options from_data_table="kraken2_databases">
                <validator type="no_options" message="No Kraken2 databases are available" />
            </options>
        </param>
        <param name="kmer_len" type="integer" min="8" max="256" value="35" label="K-mer length" />
	<param name="read_len" type="integer" min="8" max="1000" value="100" label="Read length" />
        <param name="database_name" type="text" label="Database Name" />
    </inputs>
    <outputs>
        <data name="out_file" format="data_manager_json" />
    </outputs>
    <help>
    </help>
    <citations>
        <citation type="doi">10.7717/peerj-cs.104</citation>
    </citations>
</tool>
